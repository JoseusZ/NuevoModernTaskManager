<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:ModernTaskManager.UI.ViewModels"
             xmlns:c="using:ModernTaskManager.UI.Views.Controls"
             xmlns:views="using:ModernTaskManager.UI.Views"
             x:Class="ModernTaskManager.UI.Views.ProcessesView"
             x:DataType="vm:ProcessesViewModel">

    <Grid Background="{DynamicResource AppBackgroundBrush}">
        <Grid RowDefinitions="Auto, Auto, *">
            
            <Grid Grid.Row="0" Height="60" ColumnDefinitions="Auto, *, Auto" Margin="20,0">
                <TextBlock Text="{DynamicResource Lang_Sidebar_Processes}" FontSize="20" FontWeight="SemiBold" VerticalAlignment="Center"/>
                
                <!-- Search bar removed (moved to TitleBar) -->
                <Panel Grid.Column="1" />
                
                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="10">
    
                <Button Content="{DynamicResource Lang_Menu_RunNewTask}" 
                    Background="Transparent" 
                    Foreground="{DynamicResource TextPrimaryBrush}"/>
    
            <Button Content="{DynamicResource Lang_Menu_EndTask}" 
                    Background="{DynamicResource ButtonBackground}" 
                    BorderBrush="{DynamicResource ButtonBorder}"
                    BorderThickness="1"
                    Foreground="{DynamicResource TextPrimaryBrush}"/>
            
        </StackPanel>
            </Grid>

            <Grid Grid.Row="2" RowDefinitions="Auto, *" Grid.IsSharedSizeScope="True">
                
                <Border Grid.Row="0" Background="{DynamicResource HeaderBackgroundBrush}" Height="32" Margin="4,0,4,4" CornerRadius="4">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="*" MinWidth="200" SharedSizeGroup="ColName"/>
                            <ColumnDefinition Width="80" SharedSizeGroup="ColStatus"/>
                            <ColumnDefinition Width="80" SharedSizeGroup="ColCPU"/>
                            <ColumnDefinition Width="90" SharedSizeGroup="ColMem"/>
                            <ColumnDefinition Width="90" SharedSizeGroup="ColDisk"/>
                            <ColumnDefinition Width="90" SharedSizeGroup="ColNet"/>
                            <ColumnDefinition Width="20"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="1" Text="{DynamicResource Lang_Header_Name}" VerticalAlignment="Center" FontSize="12" Foreground="{DynamicResource TextSecondaryBrush}"/>
                        <TextBlock Grid.Column="2" Text="{DynamicResource Lang_Header_Status}" VerticalAlignment="Center" FontSize="12" Foreground="{DynamicResource TextSecondaryBrush}"/>
                        <TextBlock Grid.Column="3" Text="{DynamicResource Lang_Header_CPU}" HorizontalAlignment="Right" Margin="0,0,8,0" VerticalAlignment="Center" FontSize="12" Foreground="{DynamicResource TextSecondaryBrush}"/>
                        <TextBlock Grid.Column="4" Text="{DynamicResource Lang_Header_Memory}" HorizontalAlignment="Right" Margin="0,0,8,0" VerticalAlignment="Center" FontSize="12" Foreground="{DynamicResource TextSecondaryBrush}"/>
                        <TextBlock Grid.Column="5" Text="{DynamicResource Lang_Header_Disk}" HorizontalAlignment="Right" Margin="0,0,8,0" VerticalAlignment="Center" FontSize="12" Foreground="{DynamicResource TextSecondaryBrush}"/>
                        <TextBlock Grid.Column="6" Text="{DynamicResource Lang_Header_Network}" HorizontalAlignment="Right" Margin="0,0,8,0" VerticalAlignment="Center" FontSize="12" Foreground="{DynamicResource TextSecondaryBrush}"/>
                    </Grid>
                </Border>

                <ScrollViewer Grid.Row="1">
                    <ItemsControl ItemsSource="{Binding Processes}">
                         <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <c:ProcessRow EndTaskCommand="{Binding $parent[views:ProcessesView].EndTaskCommand}"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Grid>
        </Grid>
    </Grid>
</UserControl>